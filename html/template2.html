<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>音色ネットワーク アカウント連携</title>
	<link rel="icon" href="/favicon.png">
	<link rel="stylesheet" href="style.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="dialog-box">
	<h1>アカウント連携</h1>
	<div class="accounts-grid">
		<div>
			<div class="icon-wrapper">
				<img src="%INSERT_ICON_1%" alt>
				<span class="icon-attachment discord-icon"></span>
			</div>
			<p>%INSERT_ACCOUNT_1%</p>
		</div>
		<div>
			<div class="icon-wrapper">
				<img src="%INSERT_ICON_2%" alt>
				<span class="icon-attachment xbox-icon"></span>
			</div>
			<p>%INSERT_ACCOUNT_2%</p>
		</div>
	</div>
	<p>
		連携するアカウントを間違えましたか？
		<a href="https://account.xbox.com/account/signout" target="_blank" rel="noopener noreferrer" onclick="lbutton.disabled=true">Xboxアカウントからサインアウト</a>
		して、<a href="/?reset">認証をやりなおす</a>ことができます。
	</p>
	<form>
		<button id="lbutton" class="colored-button" style="width: 100%" disabled>アカウントを連携する</button>
		<input type="hidden" id="request_id" name="request_id">
	</form>
</div>
<script>
	import('%INSERT_FP_SCRIPT_FILE%')
			.then(a=>a.load({'endpoint': '%INSERT_CUSTOM_ENDPOINT%'}))
			.then(a=>a.get())
			.then(a=>{
				request_id.value=a.requestId;
				lbutton.disabled=false
			})
			.catch(()=>lbutton.disabled=false)
</script>
</body>
</html>